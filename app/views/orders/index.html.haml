%main.container.general-main-wrap
  %h1.general-title-margin Cart
  .visible-xs
    - if @items.count.zero?
      Cart is empty
    - @items.each do |order_item|
      - item = order_item.book
      .general-cart-item.divider-lg-bottom
        %button.close.general-cart-close{type: "button", 'aria-label': "Close"}
          %span{'aria-hidden': "true"} &times;
        .general-img-wrap-table
          %img.cart-img-shadow{src: "#{try_image(item, :thumb)}", alt: "#{item.name}"}
        %p.title= item.name
        %table.table
          %tr
            %td
              %span.in-grey-600 Price
            %td
              %span.font-16.in-gold-500= number_to_currency(item.price, price_options)
          %tr
            %td.vertical-middle
              %span.in-grey-600 Quantity
            %td
              .input-group
                - if order_item.quantity.to_i == 1
                  %a{href:"javascript:void(0)", class: 'input-link'}
                    %i.fa.fa-minus.line-heaght-40
                - else
                  = link_to change_order_item_path(order_item.id, order_item.quantity - 1), method: "post", class: "input-link" do
                    %i.fa.fa-minus.line-heaght-40
                %input.form-control.quantity-input{type: "text", value: "#{order_item.quantity}", disabled: true}
                = link_to change_order_item_path(order_item.id, order_item.quantity + 1), method: "post", class: "input-link" do
                  %i.fa.fa-plus.line-heaght-40
          %tr
            %td
              %span.in-grey-600 SubTotal
            %td
              %span.font-16.in-gold-500= number_to_currency((order_item.quantity * item.price), price_options)
  .hidden-xs
    %table.table.table-hover
      %tr.no-hover
        %th.col-pic.pl-0
          %span.in-grey-600 Product
        %th.col-title
        %th.col-price
          %span.in-grey-600 Price
        %th.col-quantity
          %span.in-grey-600 Quantity
        %th.col-total
          %span.in-grey-600 SubTotal
        %th.col-close
      - if @items.count.zero?
        %tr
          %td{colspan: 6}
            .text-center
              Cart is empty
      - @items.each do |order_item|
        - item = order_item.book
        %tr
          %td
            .general-img-wrap-table
              %img.cart-img-shadow.pull-left{src: "#{try_image(item, :thumb)}", alt: "#{item.name}"}
          %td
            %p.title= item.name
          %td
            %span.font-16.in-gold-500= number_to_currency(item.price, price_options)
          %td
            .input-group
              - if order_item.quantity.to_i == 1
                %a{href:"javascript:void(0)", class: 'input-link'}
                  %i.fa.fa-minus.line-heaght-40
              - else
                = link_to change_order_item_path(order_item.id, order_item.quantity - 1), method: "post", class: "input-link" do
                  %i.fa.fa-minus.line-heaght-40
              %input.form-control.quantity-input{type: "text", value: "#{order_item.quantity}", disabled: true}
              = link_to change_order_item_path(order_item.id, order_item.quantity + 1), method: "post", class: "input-link" do
                %i.fa.fa-plus.line-heaght-40
          %td
            %span.font-16.in-gold-500= number_to_currency((order_item.quantity * item.price), price_options)
          %td
            = link_to order_item_path(order_item), method: "delete", class: "close general-cart-close" do
              %span{'aria-hidden': "true"} &times;
  .general-order-wrap
    .row
      .col-sm-4
        = simple_form_for @cart, method: :post, url: "#{activate_coupon_path}", html: {novalidate: false} do |f|
          .input-group.general-input-group
            %label.input-label Enter Your Coupon Code
            = f.input :coupon_id, :input_html => {placeholder: "Enter Your Coupon Code ", class: "form-control mb-30", type: "text", value: ""}, required: true
            -#%input.form-control.mb-30{type: "text", placeholder: "Enter Your Coupon Code "}
            %div
              = f.button :submit, "Apply Coupon", class: "btn btn-primary mr-5 mb-15 visible-xs-inline-block"
              = f.button :submit, "Update cart", class: "btn btn-primary mb-15 res-block"
              -#%button.btn.btn-primary.mr-5.mb-15.visible-xs-inline-block Apply Coupon
              -#%button.btn.btn-primary.mb-15.res-block Update cart
      .col-sm-8
        .res-mr-200.text-center.general-text-right
          %p.in-gold-500.font-18 Order Summary
          %table.general-summary-table.general-summary-table-right.general-text-right
            %tr
              %td
                %p.font-16 Subtotal:
              %td
                %p.font-16= "#{number_to_currency(@cart.subtotal, price_options)}"
            %tr
              %td
                %p.font-16 Coupon:
              %td
                %p.font-16= "#{number_to_currency(@cart.coupon_discount, price_options)}"
            %tr
              %td
                %strong.font-18 Order Total:
              %td
                %strong.font-18= "#{number_to_currency(@cart.total_items, price_options)}"
          %a.btn.btn-default.mb-20.visible-xs-inline-block{href: "#{checkout_path}"} Checkout
  .text-center
    %a.btn.btn-default.mb-20.hidden-xs{href: "#{checkout_start_path}"} Checkout
